<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>赛事Go-注册</title>
    <link rel="stylesheet" href="css/SignUp.css" type="text/css">
    <script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
    <script type="text/javascript">
        function check() {
            var loginname=document.getElementById("loginname");
            var password1 = document.getElementById("password");
            var passwordConfirm = document.getElementById("passwordConfirm");
            if(loginname.length<1){
                alert("请输入用户名");
            }
            if (password1.value.length<6)
                alert("密码格式不正确，请再次确认");
            else {
                if (password1.value !== passwordConfirm.value)
                    alert("对不起，您2次输入的密码不一致");
                else {
                    var password = document.getElementById("password").value;
                    var types = document.getElementsByName("type");
                    var type;
                    for (var i = 0; i < types.length; i++) {
                        if (types.item(i).checked) {
                            type = types.item(i).getAttribute("value");
                            break;
                        }
                    }
                }
            }}
        function test(){
                /*var password1 = document.getElementById("password");
                var passwordConfirm = document.getElementById("passwordConfirm");
                if (password1.value.length<6)
                    alert("密码格式不正确，请再次确认");
                else{
                    if(password1.value !== passwordConfirm.value)
                    alert("对不起，您2次输入的密码不一致");
                else{*/
                    var loginname=document.getElementById("loginname").value;
                    var password=document.getElementById("password").value;
                    var types=document.getElementsByName("type");
                    var type;
                    for(var i=0;i<types.length;i++){
                        if(types.item(i).checked){
                            type=types.item(i).getAttribute("value");
                            break;
                        }
                    }
            $.ajax({
                type:"post",
                url:"/SightzGo/AddUser",
                cache: false,
                data:{loginname:loginname,password:password,type:type},//传参
                dataType: "json",   //返回值类型
                success:function(data){
                    // var data=eval("("+data+")");  为什么不用这句，出来已经是object对象？？
                    if(data.success=="1")
                        alert("注册成功");
                    if(data.success=="2")
                        alert("未输入用户名");
                    if(data.success=="3")
                        alert("未输入密码");
                    if(data.success=="4")
                        alert("未选择用户类型");
                },
                error:function(){
                    alert("error");
                }
            })
        }
    </script>
</head>

<body>

<div id="table">
    <div class="tableBack">
        <div class="title">
            <a href="Home.html">
                <div class="logo">
                    <img src="images/Logo_purple.png">
                    <h1>赛事GO</h1>
                </div>
            </a>
        </div>
        <div class="input">
            <p>注册</p><hr/>
            <form action="#" method="post">
                <input placeholder="输入用户名或邮箱" id="loginname"><span>输入用户名或邮箱</span>
                <input type="password" placeholder="6~32位密码" maxlength="32" id="password"><span>密码格式不正确</span>
                <input type="password" placeholder="确认密码" maxlength="32" id="passwordConfirm"><span>两次输入密码不一致</span>
            </form>
            <div class="type">
                <span>选择成为：</span>
                <span class="spoText"><input type="radio" name="type" class="sponsor" value="1">主办方</span>
                <span class="conText"><input type="radio" name="type" class="contestant " value="2" checked>参赛者</span>
            </div>
            <span><input type="checkbox" class="check">我已阅读并同意<a href="">《赛事GO服务条款》</a></span>

        </div>
        <div class="next"><input type="button" class="submit" value="下一步" onclick=test()><hr/></div>
        <div class="bottomText">
            <p>已经有账户？<a href="SignIn.html">点击登陆</a></p>
        </div>
    </div>

</div>

</body>
</html>