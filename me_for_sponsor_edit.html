<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <title>我的-主办方-编辑</title>
    <script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="js/jquery-1.5.1.min.js"></script>
    <script type="text/javascript">
        function saved(){
            var companyname=document.getElementById("companyname").value;
            var mainbusiness=document.getElementById("mainbusiness").value;
            var managername=document.getElementById("managername").value;
            var telephone=document.getElementById("telephone").value;
            var email=document.getElementById("email").value;
            var wechat=document.getElementById("wechat").value;
            var province=document.getElementById("province").value;
            var city=document.getElementById("city").value;
            var district=document.getElementById("district").value;
            $.ajax({
                type:"post",
                url:"/SightzGo/UpdateHostServlet",
                cache: false,
                data:{
                    companyname:companyname,
                    mainbusiness:mainbusiness,
                    managername:managername,
                    telephone:telephone,
                    email:email,
                    wechat:wechat,
                    province:province,
                    city:city,
                    district:district
                },//传参
                dataType: "json",   //返回值类型
                success:function(data){
                    // var data=eval("("+data+")");  为什么不用这句，出来已经是object对象？？
                    if(data.error==="1") {
                        alert("未登录");
                        window.location.href="SignIn.html";
                    }
                    if(data.success==="0"){
                        alert("修改成功");
                        window.location.href="#";
                    }
                    if(data.success==="1"){
                        alert("修改失败");
                        window.location.href="#";
                    }
                },
                error:function(){
                    alert("error");
                }
            })
        }
        function showed(){
            $.ajax({
                type: "post",
                url: "/SightzGo/FindHostByIdServlet",
                cache: false,
                data: {},//传参
                dataType: "json",   //返回值类型
                success:function(data){
                    $.each(data,function(index,item){
                        var companyname=item.companyname;
                        var mainbusiness=item.mainbusiness;
                        var managername=item.managername;
                        var telephone=item.telephone;
                        var email=item.email;
                        var wechat=item.wechat;
                        var province=item.province;
                        var city=item.city;
                        var district=item.district;
                        document.getElementById("companyname").setAttribute("value",companyname);
                        document.getElementById("mainbusiness").setAttribute("value",mainbusiness);
                        document.getElementById("managername").setAttribute("value",managername);
                        document.getElementById("telephone").setAttribute("value",telephone);
                        document.getElementById("email").setAttribute("value",email);
                        document.getElementById("wechat").setAttribute("value",wechat);
                        document.getElementById("province").setAttribute("value",province);
                        document.getElementById("city").setAttribute("value",city);
                        document.getElementById("district").setAttribute("value",district);
                    })
                },
                error:function(XMLHttpRequest,textStatus,errorThrown){
                    alert("error");
                    alert(XMLHttpRequest.status);
                    alert(XMLHttpRequest.readyState);
                    alert(textState);
                }
            })
        }
    </script>
</head>
<body onload="showed()">
<h1>个人资料</h1>

<p><h4>个人头像</h4></p>
<input type="file" name="head" class="head" accept="image/*">

<p><h4>基本资料</h4></p>
<p>姓名：<input type="text" name="" id="managername" maxlength="100" value=""></p>
<p>公司/组织名称：<input type="text" name="" id="companyname" maxlength="100" value=""></p>
<p>营业执照<br>或其他证明文件：<input type="file" name="" class="" accept="image/*"><input type="file" name="" class="" accept="image/*"></p>
<p>主营业务：<input type="text" name="" id="mainbusiness" maxlength="100" value=""></p>
<p>省份：<input type="text" name="" id="province" maxlength="100" value=""></p>
<p>城市：<input type="text" name="" id="city" maxlength="100" value=""></p>
<p>区：<input type="text" name="" id="district" maxlength="100" value=""></p>
<p>邮箱：<input type="text" name="" id="email" maxlength="100" value=""></p>
<p>微信号：<input type="text" name="" id="wechat" maxlength="100" value=""></p>
<p>联系电话：</span><input type="text" name="" id="telephone" maxlength="100" value=""></p>
<input type="button" name="" class="" value="保存" onclick="saved()">
<input type="button" name="" class="" value="取消">
</body>
</html>